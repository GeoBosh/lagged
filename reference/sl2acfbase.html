<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert between vector and season-lag representations — sl2acfbase • lagged</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert between vector and season-lag representations — sl2acfbase"><meta name="description" content="

Convert between vector and season-lag representations of
  autocovariances of multivariate and periodically correlated time
  series."><meta property="og:description" content="

Convert between vector and season-lag representations of
  autocovariances of multivariate and periodically correlated time
  series."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">lagged</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GeoBosh/lagged/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert between vector and season-lag representations</h1>

      <div class="d-none name"><code>sl2acfbase.Rd</code></div>
    </div>

    <div class="ref-description section level2">


<p>Convert between vector and season-lag representations of
  autocovariances of multivariate and periodically correlated time
  series.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sl2acfbase</span><span class="op">(</span><span class="va">mat</span>, <span class="va">maxlag</span>, fullblocks <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">acfbase2sl</span><span class="op">(</span><span class="va">acf</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sl2vecacf</span><span class="op">(</span><span class="va">mat</span>, <span class="va">maxlag</span>, fullblocks <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-acf">acf<a class="anchor" aria-label="anchor" href="#arg-acf"></a></dt>
<dd><p>an acf as returned by base R <code>acf</code>.</p></dd>

  <dt id="arg-mat">mat<a class="anchor" aria-label="anchor" href="#arg-mat"></a></dt>
<dd><p>a matrix containing autocovariances in season-lag arrangement.</p></dd>

  <dt id="arg-maxlag">maxlag<a class="anchor" aria-label="anchor" href="#arg-maxlag"></a></dt>
<dd><p>maximal lag, a positive integer.</p></dd>

  <dt id="arg-fullblocks">fullblocks<a class="anchor" aria-label="anchor" href="#arg-fullblocks"></a></dt>
<dd><p>if TRUE, keep full blocks only.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>


<p>These functions rearrange autocovariances and autocorrelations between
  the native season-lag arrangement in package “pcts” and the vector
  representations of the corresponding mutivariate models (vector of
  seasons representation of periodic models). Variable \(s\) is taken
  be season \(s\) and vice versa in the opposite direction.</p>
<p>“acfbase” in the names of the functions refers to the representation
  returned by base function <code>acf</code>.</p>
<p><code>acfbase2sl</code> rearranges a multivariate acf in season-lag form.</p>
<p><code>sl2acfbase</code> rearranges a season-lag form into the multivariate
  form used by base function <code>acf</code>.</p>
<p><code>sl2vecacf</code> is similar to <code>sl2acfbase</code> but the result is
  such that the lag is in the third dimension and <code>r[ , , k]</code> is
  \(Cov(X_{t}, X_{t-k})\) (not its transpose). See also the examples
  below and in <code><a href="acf2Lagged.html">acf2Lagged</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>for <code>acfbase2sl</code>, a matrix.</p>
<p>for <code>sl2acfbase</code> and <code>sl2vecacf</code>, an array.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Georgi N. Boshnakov</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## use a character matrix to illustrate the positions of the elements</span></span></span>
<span class="r-in"><span><span class="va">matsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Ra"</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Rb"</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">matsl</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1]  [,2]  [,3]  [,4] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "Ra0" "Ra1" "Ra2" "Ra3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "Rb0" "Rb1" "Rb2" "Rb3"</span>
<span class="r-in"><span><span class="co">## convert to what I consider "standard" vec format R(k)=EX_tX_{t-k}'</span></span></span>
<span class="r-in"><span><span class="fu">sl2vecacf</span><span class="op">(</span><span class="va">matsl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1]  [,2] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "Ra0" "Rb1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "Rb1" "Rb0"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1]  [,2] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "Ra2" "Ra1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "Rb3" "Rb2"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] NA   "Ra3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] NA   NA   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co">## convert to the format from acf() (R(k) is the transposed from mine).</span></span></span>
<span class="r-in"><span><span class="fu">sl2acfbase</span><span class="op">(</span><span class="va">matsl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1]  [,2] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "Ra0" "Rb1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "Ra2" "Ra1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] NA    "Ra3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1]  [,2] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "Rb1" "Rb0"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "Rb3" "Rb2"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] NA    NA   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu">sl2vecacf</span><span class="op">(</span><span class="va">matsl</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/aperm.html" class="external-link">aperm</a></span><span class="op">(</span><span class="fu">sl2acfbase</span><span class="op">(</span><span class="va">matsl</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># TRUE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## by default the conversion is lossles;</span></span></span>
<span class="r-in"><span><span class="co">## so this contains all values from the original and some NA's:</span></span></span>
<span class="r-in"><span><span class="fu">sl2acfbase</span><span class="op">(</span><span class="va">matsl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1]  [,2] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "Ra0" "Rb1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "Ra2" "Ra1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] NA    "Ra3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1]  [,2] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "Rb1" "Rb0"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "Rb3" "Rb2"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] NA    NA   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co">## the orignal, matsl, can be restored:</span></span></span>
<span class="r-in"><span><span class="fu">acfbase2sl</span><span class="op">(</span><span class="fu">sl2acfbase</span><span class="op">(</span><span class="va">matsl</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1]  [,2]  [,3]  [,4] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "Ra0" "Ra1" "Ra2" "Ra3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "Rb0" "Rb1" "Rb2" "Rb3"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu">acfbase2sl</span><span class="op">(</span><span class="fu">sl2acfbase</span><span class="op">(</span><span class="va">matsl</span><span class="op">)</span><span class="op">)</span>, <span class="va">matsl</span><span class="op">)</span>  <span class="co"># TRUE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## this drops some values (if necessary) to keep complete block only</span></span></span>
<span class="r-in"><span><span class="fu">sl2acfbase</span><span class="op">(</span><span class="va">matsl</span>, fullblocks <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1]  [,2] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "Ra0" "Rb1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "Ra2" "Ra1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1]  [,2] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "Rb1" "Rb0"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "Rb3" "Rb2"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Georgi N. Boshnakov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

